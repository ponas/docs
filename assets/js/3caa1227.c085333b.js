"use strict";(self.webpackChunkdocs_sikt_no=self.webpackChunkdocs_sikt_no||[]).push([[9275],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>c});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var o=n.createContext({}),d=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=d(e.components);return n.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),k=d(r),c=i,g=k["".concat(o,".").concat(c)]||k[c]||p[c]||a;return r?n.createElement(g,l(l({ref:t},u),{},{components:r})):n.createElement(g,l({ref:t},u))}));function c(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,l=new Array(a);l[0]=k;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var d=2;d<a;d++)l[d]=r[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}k.displayName="MDXCreateElement"},4994:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var n=r(7462),i=(r(7294),r(3905));const a={},l="Oppsett av MS Defender-integrasjon",s={unversionedId:"educsc/trusseletterretning/ms-defender",id:"educsc/trusseletterretning/ms-defender",title:"Oppsett av MS Defender-integrasjon",description:"For \xe5 ta i bruk eduCSC sine sperrelister i Microsoft Defender ATP, m\xe5 du lage en",source:"@site/docs/educsc/trusseletterretning/ms-defender.md",sourceDirName:"educsc/trusseletterretning",slug:"/educsc/trusseletterretning/ms-defender",permalink:"/docs/educsc/trusseletterretning/ms-defender",draft:!1,editUrl:"https://github.com/sikt-no/docs/tree/master/docs/educsc/trusseletterretning/ms-defender.md",tags:[],version:"current",lastUpdatedAt:1692946809,formattedLastUpdatedAt:"Aug 25, 2023",frontMatter:{},sidebar:"educsc",previous:{title:"Cybersikkerhetssenter for forskning og utdanning",permalink:"/docs/educsc/"}},o={},d=[],u={toc:d};function p(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"oppsett-av-ms-defender-integrasjon"},"Oppsett av MS Defender-integrasjon"),(0,i.kt)("p",null,"For \xe5 ta i bruk eduCSC sine sperrelister i Microsoft Defender ATP, m\xe5 du lage en\napp-registrering hos Microsoft. eduCSC bruker denne til \xe5 kople seg til og\nfortl\xf8pende legge inn indikatorer som skal blokkeres eller alarmeres."),(0,i.kt)("p",null,"I forkant b\xf8r du gj\xf8re to vurderinger:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Hvordan skal utrulling skje?")," Vi kan skru av blokkering. Dermed vil ikke brukerne\nbli forhindret i oppstartsfasen, og evt. falske positive kan lukes ut. Vi tilr\xe5r\ndette alternativet for de aller fleste. Blokkering er enkelt \xe5 skru p\xe5 igjen."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Hvor mange indikatorer?")," Microsoft opererer for tiden med en grense p\xe5 15 000\negendefinerte indikatorer totalt i MS Defender. Dette inkluderer v\xe5re indikatorer.\n\xc5 g\xe5 over denne grensen kan f\xf8re til at synkroniseringen feiler. Det er derfor\nmulig \xe5 sette et tak p\xe5 hvor mange indikatorer du vil ha. Vi legger inn ferskere\nindikatorer eller de med h\xf8yere alvorlighet f\xf8rst. Det er ogs\xe5 enkelt \xe5 justere senere.")),(0,i.kt)("p",null,"Slik g\xe5r du fram:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Lag en app-registrering (se ",(0,i.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app"},"Microsoft sin\nguide"),").\nMerk deg ",(0,i.kt)("strong",{parentName:"li"},"\xabdirectory (tenant) ID\xbb")," og ",(0,i.kt)("strong",{parentName:"li"},"\xabapplication (client) ID\xbb"),"."),(0,i.kt)("li",{parentName:"ul"},"Via \xabAPI permissions\xbb, legg til WindowDefenderATP: Ti.ReadWrite (\xabRead and\nwrite IOCs belonging to the app\xbb).",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Merk: Dette er ",(0,i.kt)("strong",{parentName:"li"},"ikke")," det samme som ",(0,i.kt)("inlineCode",{parentName:"li"},"Ti.ReadWrite.All"),". Vi anbefaler ikke \xe5 bruke denne, siden\nden gir st\xf8rre tilganger enn eduCSC trenger. Mer konkret kan vi med denne tilgangen b\xe5de se og endre\nindikatorer du eller andre leverand\xf8rer har lagt inn, som n\xe6r alltid er un\xf8dvendig."))),(0,i.kt)("li",{parentName:"ul"},"Via \xabCertificates and secrets\xbb, lag en client secret. ",(0,i.kt)("strong",{parentName:"li"},"Skriv ned innholdet i\nhemmeligheten"),", dvs. \xabclient secret\xbb. Husk ogs\xe5 at denne m\xe5 meldes til eduCSC\np\xe5 nytt om hemmeligheten g\xe5r ut p\xe5 dato (expiry).")),(0,i.kt)("p",null,"Meld deretter f\xf8lgende tilbake til eduCSC (via IRT-chat):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Directory (tenant) ID"),(0,i.kt)("li",{parentName:"ul"},"Application (client) ID"),(0,i.kt)("li",{parentName:"ul"},"(Client) secret, det vil si hemmeligheten du laget tidligere. Merk at dette er\nselve verdien og ",(0,i.kt)("strong",{parentName:"li"},"ikke")," \xabsecret ID\xbb. Om du ikke skrev det ned, slett den\ngamle hemmeligheten og lag en ny. Om hemmeligheten har begrenset varighet,\nsi hvilken dato (dag) den g\xe5r ut, slik at vi kan varsle n\xe6r utgangsdato."),(0,i.kt)("li",{parentName:"ul"},"Om du vil skru av blokkering i oppstarten (anbefalt)."),(0,i.kt)("li",{parentName:"ul"},"Om aktuelt: Et tak p\xe5 hvor mange indikatorer vi skal synkronisere.")),(0,i.kt)("p",null,"Synkronisering tar typisk 10 minutter etter det er lagt inn. Du kan stadfeste at\ndata kommer inn ved \xe5 bes\xf8ke ",(0,i.kt)("a",{parentName:"p",href:"https://security.microsoft.com"},"sikkerhetsportalen til Microsoft"),",\ng\xe5 til \xabSettings\xbb, deretter \xabEndpoints\xbb, \xabIndicators\xbb og til sist \xabURLs/Domains\xbb.\nTittelen p\xe5 reglene til eduCSC starter med \xabEDUCSC \xabFEEDNAVN\xbb -\xbb."),(0,i.kt)("p",null,"For \xe5 teste p\xe5 klient, sjekk om domenet ",(0,i.kt)("inlineCode",{parentName:"p"},"ms-atp.dnsbrannmur[.]no")," lager varsel\neller blokkering. Merk at det kan ta noe tid for Microsoft synkroniserer all\ndataen ut p\xe5 endepunkt."),(0,i.kt)("p",null,"Ved mistanke om falske positive, kontakt eduCSC via IRT-chat. Dette gjelder\nspesielt ved blokkering. Det samme gjelder om du vil gj\xf8re endringer i oppsettet,\nfor eksempel skru p\xe5 blokkering eller minke antallet indikatorer."))}p.isMDXComponent=!0}}]);